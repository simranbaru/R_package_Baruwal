---
title: "Baruwal R Package"
author: "Simran Baruwal"
date: "12/2/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Data Simulation
This tutorial uses the function from package FossilSim to simulate datasets from posterior distribution. We quantify some characteristics of both the simulated and emperical(origin time) datasets using test statistics, here, mean and standard deviation. The goal is to check the model accuracy. 

Load in common library 
```{r}
library(tidyverse)
library(ggplot2)

```

You need to install some fbd R package for this package in run.
```{r}
install.packages("FossilSim")
library(FossilSim)
```

```{r}
install.packages("devtools")
library(devtools)
```

Now, we install my R package:
```{r}
devtools::install_github("simranbaru/R_Package_Baruwal")
library(BaruwalRPackage)
devtools::load_all()
```

Let us download some data for our package:

```{r}
download.file(url = "https://raw.githubusercontent.com/simranbaru/R_package_Baruwal/master/data/ants_timevary.log", destfile = "/cloud/project/vignettes/ants_timevary.log")
```

Lets load our data and get started:

```{r}
ants <- read_tsv("/cloud/project/vignettes/ants_timevary.log")
ants
```


```{r}
lambda <- ants$speciation_rate
mu <- ants$extinction_rate
psi <- ants$psi
```

Now, lets simulate the data using function simulation:

```{r} 
i = 1
trees <- vector()
while (i <= 20) {
trees[i] <- c(BaruwalRPackage::simulation(n=10, numbsim=1, lambda[i], mu[i], psi[i], frac = .01))
print(trees[i])
i <- i + 1
}
 
```

Output:
```{r}
i = 1
simulated <- vector()
for(i in 1:20){
  simulated[i] <- c(trees[[i]]$root.edge)
}
emperical_data <- ants$origin_time
meane <- mean(emperical_data)
means <- mean(simulated)
```

#data Visualization using function treeplot

```{r}
i = 1
for (i in 1:20) {
BaruwalRPackage::treeplot(i)
}
```

Output:

```{r}
treeplot(1)
```

Compare the simulated data with emperical data 

Create a dataframe to store all your datas
```{r}
datas <- data.frame(simulated, emperical_data, meane, means)
```

#Using function comparision
```{r}
comparision(datasdf = datas)
```


#Calculating effect_size

```{r}
effect_size(datasdf = datas)
```
